{% load i18n %}
{% load humanize %}
{% load date_diff %}
{% load static %}


<div class="payment-listing">
    <div class="float-right payment-font-size">
        {{ payment.get_amount_display|intcomma }} {{ payment.get_currency_display }}<span>
            {% if payment.invoice %}
            <div class="float-right payment-font-size">
                <a href="{% url 'user-invoice' pk=payment.pk %}" class="link">{{ payment.invoice_filename }}<span><img src="{% static "img/dowload.png" %}" alt=">" /></span></a>
            </div>
            {% elif payment.state != 5 %}
            <div class="float-right">
                {% if payment.is_waiting_for_user %}
                    <a class="link" href="{{ payment.get_absolute_url }}">{{ payment.get_state_display }}</a>
                {% elif payment.details.reject_reason %}
                    {{ payment.get_state_display }}: {{ payment.details.reject_reason }}
                {% else %}
                    {{ payment.get_state_display }}
                {% endif %}
            </div>
            {% endif %}</span>
    </div>
    {{ payment.description }} <em>—</em><span> {% if payment.end|days_diff_from_today < 365 %}
        <t>{% trans "monthly" %}</t>
        {% else %}
        <t>{% trans "yearly" %}</t>
        {% endif %}</span> <br />
    {% if payment.start %}
        <div class="payment-font-size">{% blocktrans with created=payment.start|date:"d M Y" expires=payment.end|date:"d M Y" context "Date range" %}{{ created }}<em>—</em>{{ expires }}{% endblocktrans %}</div>
    {% endif %}
    <div class="clear"></div>
</div>
